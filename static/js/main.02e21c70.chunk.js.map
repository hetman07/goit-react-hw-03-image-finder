{"version":3,"sources":["components/Button/Button.module.css","components/App.module.css","components/Notification/Notification.jsx","components/HitsList/HitsList.jsx","components/SearchForm/SearchForm.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","service/pixabayApi.jsx","components/App.js","index.js","components/SearchForm/SearchForm.module.css","components/HitsList/HistList.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Notification","message","HitsList","hits","onShowModal","className","styles","ImageGallery","map","id","webformatURL","tags","largeImageURL","ImageGalleryItem","key","onClick","src","width","alt","data-modal","SearchForm","state","inputValue","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","Searchbar","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","Button","onLoadMore","Modal","srcModal","handleKeyDown","code","onCloseModal","handleModalClick","nodeName","window","addEventListener","removeEventListener","Overlay","children","searchQuery","page","axios","get","App","per_page","total","error","isLoading","showModal","scroll","scrollTo","top","document","documentElement","scrollHeight","behavior","fetchImg","pixabayApi","then","data","prevState","catch","finally","handleSearchFormSubmit","query","largeImg","dataset","modal","closeModal","prevProps","prevPage","length","color","height","timeout","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.02e21c70.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2kUMR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__b9Pch\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function Notification({message}) {\r\n    return(\r\n        <p>Whoops, something went wrong: {message}</p>\r\n    )\r\n}\r\n\r\nNotification.propTypes = {\r\n    message: PropTypes.string,\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from \"./HistList.module.css\";\r\n\r\nexport default function HitsList ({hits, onShowModal}) {\r\n    return(\r\n        <ul className={styles.ImageGallery}>\r\n            {hits.map(({id, webformatURL, tags, largeImageURL}) => (\r\n                <li className={styles.ImageGalleryItem} key={id} onClick={onShowModal}>\r\n                    <img src={webformatURL} \r\n                    width=\"640\" \r\n                    alt={tags} \r\n                    data-modal={largeImageURL} \r\n                    className=\"ImageGalleryItem-image\" />\r\n                </li>\r\n            ))}\r\n        </ul>\r\n    )\r\n}\r\n\r\nHitsList.propTypes ={\r\n    hits: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number.isRequired,\r\n            webformatURL: PropTypes.string.isRequired,\r\n            tags: PropTypes.string.isRequired,\r\n            largeImageURL: PropTypes.string.isRequired,   \r\n        })\r\n    ),\r\n    onShowModal: PropTypes.func.isRequired \r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from \"./SearchForm.module.css\";\r\n\r\nexport default class SearchForm extends Component {\r\n    static propTypes = {\r\n        state: PropTypes.shape({\r\n            inputValue: PropTypes.string\r\n        }),\r\n        handleChange: PropTypes.func,\r\n        handleSubmit: PropTypes.func,\r\n    }\r\n    \r\n    state = { inputValue: '' };\r\n\r\n    handleChange = (e) => {  \r\n        \r\n        this.setState  ({ inputValue: e.target.value });\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n       \r\n        this.props.onSubmit(this.state.inputValue);\r\n        //в App мы передаем проп = onSubmit - который получит параметр\r\n        //query - это то значение которое мы вводим в поле инпут this.state.inputValue в файле SearchForm.jsx\r\n\r\n        // this.setState({inputValue: '' });\r\n        //поле инпут очищалось\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header className={styles.Searchbar}>\r\n            <form className={styles.SearchForm} \r\n                  onSubmit = {this.handleSubmit}    >\r\n                      <button type=\"submit\" className={styles.SearchFormButton}>\r\n      <span className={styles.SearchFormButtonLabel}>Search</span>\r\n    </button>\r\n                \r\n                    <input className={styles.SearchFormInput}\r\n                     type=\"text\"\r\n                     autoComplete=\"off\"\r\n                     autoFocus\r\n                     placeholder=\"Search images and photos\"\r\n                    value={this.state.inputValue}\r\n                    onChange = {this.handleChange}             \r\n                    />\r\n            </form>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from \"./Button.module.css\";\r\n\r\nexport default function Button({onLoadMore}) {\r\n    return (\r\n        \r\n         <button className={styles.Button} type=\"button\" onClick={onLoadMore}>\r\n            Load more\r\n          </button>   \r\n                 \r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from \"./Modal.module.css\";\r\n\r\nexport default class Modal extends Component {\r\n    static propTypes = {\r\n        state: PropTypes.shape({\r\n            srcModal: PropTypes.string,\r\n            }),\r\n        handleKeyDown: PropTypes.func,\r\n        handleModalClick: PropTypes.func,\r\n    }\r\n\r\n    state = {\r\n        srcModal: \"\",\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown)\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeyDown)\r\n    }\r\n\r\n    //создаем метод класса на создание слушателя для того что бы можно\r\n    //было почистить в componentWillUnmount ДОЛЖНА БЫТЬ ОДНА ССЫЛКА\r\n\r\n    handleKeyDown = e => {\r\n        if(e.code === 'Escape') {\r\n            this.props.onCloseModal();\r\n        }\r\n    }\r\n\r\n    handleModalClick = e => {\r\n        if (e.target.nodeName !== 'IMG') {\r\n            this.props.onCloseModal(); \r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles.Overlay} onClick={this.handleModalClick}>\r\n                <div className={styles.Modal}>\r\n                  {this.props.children}  \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from 'axios';\r\n\r\n const keyId = '16866490-95e5a3597ee6f5bb528b18ee9';\r\nconst per_page = 12;\r\n\r\nconst fetchImageWithQuery = (searchQuery, page) => {\r\n    return axios\r\n    .get(\r\n        `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${keyId}&image_type=photo&orientation=horizontal&per_page=${per_page}`)\r\n  //.then(response => response.data.hits) //обязательно response.data\r\n  }\r\n//   .catch(function (error) {\r\n//     // handle error\r\n//     console.log(error);\r\n//   })\r\n//   .finally(function () {\r\n//     // always executed\r\n//   });\r\n;\r\n\r\nexport default {fetchImageWithQuery};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Loader from \"react-loader-spinner\";\n\nimport Notification from \"./Notification/Notification\";\nimport HitsList from \"./HitsList\";\nimport SearchForm from \"./SearchForm\";\nimport Button from \"./Button\";\nimport Modal from \"./Modal\";\nimport pixabayApi from \"../service/pixabayApi\";\n\nimport styles from \"./App.module.css\";\n\nclass App extends Component {\n  static propTypes = {\n    state: PropTypes.shape({\n      hits: PropTypes.arrayOf(\n        PropTypes.shape({\n          id: PropTypes.number.isRequired,\n          webformatURL: PropTypes.string.isRequired,\n          tags: PropTypes.string.isRequired,\n          largeImageURL: PropTypes.string.isRequired,\n        }),\n      ),\n      searchQuery: PropTypes.string,\n      page: PropTypes.number,\n      per_page: PropTypes.number,\n      total: PropTypes.number,\n      error: PropTypes.string,\n      isLoading: PropTypes.bool,\n      showModal: PropTypes.bool,\n      srcModal: PropTypes.string,\n    }),\n    fetchImg: PropTypes.func,\n    handleSearchFormSubmit: PropTypes.func,\n    showModal: PropTypes.func,\n    closeModal: PropTypes.func,\n  };\n\n  state = {\n    hits: [],\n    searchQuery: \"\",\n    page: 1,\n    per_page: 12,\n    total: 0,\n\n    error: null,\n    isLoading: false,\n\n    showModal: false,\n    srcModal: \"\",\n  };\n\n  //fetch делаем только в том случае если в state поменялось св-во searchQuery\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ page: 1 });\n      this.fetchImg();\n    }\n\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (nextPage > prevPage) {\n      this.scroll();\n    }\n  }\n\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  fetchImg = () => {\n    // console.log(\"searchQuery\", this.state.searchQuery);\n    const { searchQuery, page } = this.state;\n    this.setState({\n      isLoading: true,\n    });\n\n    pixabayApi\n      .fetchImageWithQuery(searchQuery, page)\n      .then(({ data }) =>\n        this.setState(prevState => ({\n          hits: [...prevState.hits, ...data.hits],\n          page: prevState.page + 1,\n          total: data.total,\n        })),\n      ) //увелич текущую страницу на 1\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  //для того что бы значение query сохранить в state\n  //при submit формы а также при новом запросе обнулить массив и страницу\n  handleSearchFormSubmit = query => {\n    this.setState({\n      searchQuery: query,\n      page: 1,\n      hits: [],\n    });\n  };\n\n  showModal = e => {\n    const largeImg = e.target.dataset.modal;\n    this.setState(state => ({\n      showModal: true,\n      srcModal: largeImg,\n    }));\n  };\n\n  closeModal = e => {\n    this.setState(state => ({\n      showModal: false,\n      srcModal: \"\",\n    }));\n  };\n\n  render() {\n    const { hits, isLoading, error, showModal, srcModal, total } = this.state;\n\n    return (\n      <div className={styles.App}>\n        <SearchForm onSubmit={this.handleSearchFormSubmit} />\n        {error && <Notification message={error.message} />}\n\n        {hits.length > 0 && (\n          <HitsList hits={hits} onShowModal={this.showModal} />\n        )}\n\n        {showModal && (\n          <Modal onCloseModal={this.closeModal}>\n            <img src={srcModal} alt=\"\" />\n          </Modal>\n        )}\n\n        {isLoading && (\n          <Loader\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            timeout={5000} //3 secs\n          />\n        )}\n        {hits.length > 0 && hits.length !== total && !isLoading && (\n          <Button onLoadMore={this.fetchImg} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchForm_Searchbar__12W26\",\"SearchForm\":\"SearchForm_SearchForm__1DYoh\",\"SearchFormButton\":\"SearchForm_SearchFormButton__1IZCv\",\"SearchFormButtonLabel\":\"SearchForm_SearchFormButtonLabel__3A0rx\",\"SearchFormInput\":\"SearchForm_SearchFormInput__H4zCC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"HistList_ImageGallery__1eFaJ\",\"ImageGalleryItem\":\"HistList_ImageGalleryItem__QsfMw\",\"ImageGalleryItem-image\":\"HistList_ImageGalleryItem-image__3TflV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3xUvt\",\"Modal\":\"Modal_Modal__34ojn\"};"],"sourceRoot":""}